<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arisan Kompak UGM - Official App</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;700;800&family=Playfair+Display:ital,wght@1,600&family=Pacifico&family=Courier+Prime&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        :root {
            /* Startup Color Palette */
            --primary: #FF4785; 
            --primary-gradient: linear-gradient(135deg, #FF4785 0%, #FF8EB3 100%);
            --secondary: #6C5DD3;
            --bg-body: #F9FAFB;
            --surface: #FFFFFF;
            --text-main: #111827;
            --text-muted: #6B7280;
            --border: #E5E7EB;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-glow: 0 0 20px rgba(255, 71, 133, 0.3);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg-body);
            color: var(--text-main);
            margin: 0; padding: 0;
            overflow-x: hidden;
        }

        /* --- NAVBAR --- */
        nav {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 100;
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem; font-weight: 700; color: var(--text-main);
            display: flex; align-items: center; gap: 8px;
        }
        .brand i { color: var(--primary); }

        .btn-login {
            background: var(--text-main); color: white;
            padding: 10px 20px; border-radius: 50px;
            font-size: 0.875rem; font-weight: 600; border: none;
            cursor: pointer; transition: all 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        .btn-login:hover { transform: translateY(-1px); box-shadow: var(--shadow-lg); }

        /* --- HERO SECTION --- */
        .hero {
            text-align: center; padding: 80px 20px 40px;
            background: radial-gradient(circle at 50% 0%, #fff1f2 0%, transparent 70%);
        }

        h1 {
            font-size: 2.5rem; line-height: 1.1; margin-bottom: 16px; letter-spacing: -0.02em;
        }
        h1 span {
            background: var(--primary-gradient);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.1rem; color: var(--text-muted); max-width: 600px; margin: 0 auto 30px;
            line-height: 1.6;
        }

        .hero-action {
            display: flex; justify-content: center;
        }

        .btn-cta {
            background: var(--primary-gradient); color: white;
            padding: 16px 40px; border-radius: 16px; border: none;
            font-size: 1rem; font-weight: 700; text-decoration: none;
            box-shadow: var(--shadow-glow); transition: all 0.3s;
            display: inline-flex; align-items: center; gap: 10px;
            cursor: pointer;
        }
        .btn-cta:hover { transform: translateY(-3px) scale(1.02); }

        /* --- SPOTLIGHT SECTION (PEMENANG) --- */
        .spotlight-section {
            max-width: 800px; margin: -20px auto 40px; padding: 0 20px;
            position: relative; z-index: 10;
        }
    
        .spotlight-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 2px solid white;
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(255, 71, 133, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideUpFade 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            transition: all 0.3s;
        }
    
        /* Efek Kilau Background */
        .spotlight-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.15) 0%, transparent 60%);
            animation: rotateBg 10s linear infinite; pointer-events: none;
        }
    
        @keyframes rotateBg { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);} }
        @keyframes slideUpFade { from {opacity: 0; transform: translateY(40px);} to {opacity: 1; transform: translateY(0);} }
    
        .crown-icon {
            font-size: 3.5rem; color: #F59E0B;
            margin-bottom: 10px; display: inline-block;
            filter: drop-shadow(0 5px 15px rgba(245, 158, 11, 0.4));
            animation: floatTrophy 3s ease-in-out infinite;
        }
        
        .empty-icon {
            font-size: 3rem; color: #E5E7EB; margin-bottom: 10px;
        }
    
        @keyframes floatTrophy { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }
    
        .spotlight-label {
            font-size: 0.85rem; font-weight: 700; color: var(--primary);
            text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px;
        }
    
        .spotlight-name {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem; font-weight: 700; color: var(--text-main);
            margin: 5px 0;
            background: linear-gradient(45deg, #111, #555);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
    
        .spotlight-date {
            font-size: 0.9rem; color: var(--text-muted); font-weight: 500;
            background: #F3F4F6; padding: 5px 15px; border-radius: 20px;
            display: inline-block; margin-top: 10px;
        }

        /* --- CONTAINER --- */
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px 60px; }

        /* --- 3D CARD SECTION --- */
        .finance-section { margin-top: 40px; }
        
        .section-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;
        }
        .section-title { font-size: 1.25rem; font-weight: 700; }

        /* ATM CARD */
        .atm-card {
            width: 100%; max-width: 400px; height: 240px; margin: 0 auto;
            border-radius: 24px;
            background: linear-gradient(135deg, #1e1e2f 0%, #2d2d44 100%);
            position: relative; overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            color: white; font-family: 'Courier Prime', monospace;
            transform-style: preserve-3d; transition: transform 0.1s; cursor: pointer;
        }
        
        .atm-card::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(105deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 50%);
            pointer-events: none;
        }

        .card-content { padding: 25px; height: 100%; display: flex; flex-direction: column; justify-content: space-between; position: relative; z-index: 2; }
        .card-top { display: flex; justify-content: space-between; align-items: flex-start; }
        .chip { width: 45px; height: 32px; background: linear-gradient(135deg, #FFD700, #FDB931); border-radius: 6px; }
        .visa { font-weight: 800; font-size: 1.5rem; font-style: italic; letter-spacing: 2px; }
        .card-mid { margin-top: auto; margin-bottom: 20px; }
        .card-label { font-size: 0.65rem; text-transform: uppercase; opacity: 0.7; margin-bottom: 4px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .card-number-wrapper { display: flex; align-items: center; gap: 10px; }
        .card-number { font-size: 1.4rem; letter-spacing: 2px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .btn-copy {
            background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3);
            width: 32px; height: 32px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
            color: white; cursor: pointer; transition: 0.2s;
        }
        .btn-copy:hover { background: white; color: #333; }
        .card-bottom { display: flex; justify-content: space-between; }
        .holder-name { font-size: 0.9rem; letter-spacing: 1px; text-transform: uppercase; font-weight: 600; }

        /* Toast */
        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: #10B981; color: white; padding: 12px 24px; border-radius: 50px;
            font-weight: 600; box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.3);
            opacity: 0; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000;
            display: flex; align-items: center; gap: 8px;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        /* --- COST BUTTONS --- */
        .cost-actions {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px; max-width: 500px; margin-left: auto; margin-right: auto;
        }
        .btn-cost {
            padding: 15px; border-radius: 16px; border: 1px solid var(--border);
            background: white; text-align: center; transition: 0.2s;
        }
        .btn-cost small { display: block; color: var(--text-muted); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-cost div { font-size: 1.1rem; font-weight: 700; color: var(--text-main); margin-top: 4px; }
        .btn-cost:hover { border-color: var(--primary); background: #fff1f2; }

        /* --- FILTERS & LIST --- */
        .filter-bar {
            background: white; padding: 10px; border-radius: 16px; border: 1px solid var(--border);
            display: flex; gap: 10px; margin-bottom: 20px; box-shadow: var(--shadow-sm);
            flex-wrap: wrap;
        }
        
        select {
            flex: 1; padding: 12px; border-radius: 12px; border: 1px solid var(--border);
            background: #f9fafb; font-family: inherit; font-weight: 600; color: var(--text-main);
            outline: none; cursor: pointer; min-width: 100px;
        }
        select:focus { border-color: var(--primary); }

        .search-wrapper { flex: 2; position: relative; min-width: 200px; }
        .search-wrapper i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--text-muted); }
        .search-wrapper input {
            width: 100%; padding: 12px 12px 12px 40px; border-radius: 12px; border: 1px solid var(--border);
            background: #f9fafb; font-family: inherit; outline: none;
        }
        .search-wrapper input:focus { border-color: var(--primary); background: white; }

        /* GRID PESERTA */
        .grid-list {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;
        }

        .user-card {
            background: white; padding: 16px; border-radius: 16px; border: 1px solid var(--border);
            display: flex; align-items: center; gap: 16px; transition: 0.2s; position: relative;
        }
        .user-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); border-color: #fbcfe8; }

        .user-avatar {
            width: 48px; height: 48px; border-radius: 12px;
            background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
            color: var(--text-muted); display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 1.1rem; flex-shrink: 0;
        }
        .user-avatar.paid { background: linear-gradient(135deg, #D1FAE5 0%, #10B981 100%); color: #064E3B; }

        .user-info { flex: 1; }
        .user-name { font-weight: 700; font-size: 0.95rem; margin-bottom: 2px; }
        .user-meta { font-size: 0.75rem; color: var(--text-muted); display: flex; align-items: center; gap: 6px; }
        
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #E5E7EB; }
        .status-dot.paid { background: #10B981; box-shadow: 0 0 8px #10B981; }

        .amount-tag {
            font-size: 0.8rem; font-weight: 600; color: var(--text-main);
            background: #F3F4F6; padding: 4px 10px; border-radius: 8px;
        }

        /* --- WAITING MODAL (BARU) --- */
        #locked-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 3000; display: none;
            justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: white; padding: 40px; border-radius: 24px; text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); width: 90%; max-width: 350px;
            animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popUp { from {transform: scale(0.8) translateY(20px); opacity: 0;} to {transform: scale(1) translateY(0); opacity: 1;} }

        /* Responsive */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .atm-card { height: 220px; }
            .filter-bar { flex-direction: column; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="brand">
            <i class="fa-solid fa-shapes"></i> ArisanUGM
        </div>
        <button class="btn-login" onclick="handleLogin()">
            <i class="fa-brands fa-google"></i> Masuk
        </button>
    </nav>

    <header class="hero">
        <h1>Kocokan Arisan <br><span>Digital & Modern</span></h1>
        <p class="subtitle">Platform arisan keluarga besar UGM dengan sistem transparansi tinggi dan data real-time.</p>
        
        <div class="hero-action">
            <button onclick="handleEnterLive()" class="btn-cta">
                <i class="fa-solid fa-play"></i> Mulai Live Arisan
            </button>
        </div>
    </header>

    <section class="spotlight-section">
        <div class="spotlight-card" id="spotlight-card">
            <div id="spot-content-winner" style="display:none;">
                <div class="crown-icon"><i class="fa-solid fa-crown"></i></div>
                <div class="spotlight-label">ðŸŽ‰ Pemenang Periode Bulan Ini</div>
                <h2 class="spotlight-name" id="spot-name">Nama Pemenang</h2>
                <div class="spotlight-date" id="spot-date">Minggu, 12:00 WIB</div>
            </div>
            
            <div id="spot-content-empty">
                <div class="empty-icon"><i class="fa-solid fa-hourglass-half"></i></div>
                <div class="spotlight-label" style="color:#9CA3AF;">Belum Ada Pemenang</div>
                <h2 class="spotlight-name" style="font-size:1.5rem; background:none; -webkit-text-fill-color:#374151;">Siapakah selanjutnya?</h2>
                <div class="spotlight-date" style="background:#F3F4F6; color:#9CA3AF;">Pantau Terus!</div>
            </div>
        </div>
    </section>

    <div class="container">
        
        <div class="finance-section">
            <div class="section-header">
                <div class="section-title">Rekening Bersama</div>
                <div style="font-size:0.8rem; color:var(--primary); font-weight:600;">Bank BCA</div>
            </div>

            <div class="atm-card" id="tiltCard">
                <div class="card-content">
                    <div class="card-top">
                        <div class="chip"></div>
                        <div class="visa">BCA</div>
                    </div>
                    <div class="card-mid">
                        <div class="card-label">Nomor Rekening</div>
                        <div class="card-number-wrapper">
                            <div class="card-number" id="rekText">6050 527 156</div>
                            <div class="btn-copy" onclick="copyToClipboard()" title="Salin">
                                <i class="fa-regular fa-copy"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-bottom">
                        <div>
                            <div class="card-label">Pemilik</div>
                            <div class="holder-name">APRILIA PUTRI WARDANI</div>
                        </div>
                        <div>
                            <div class="card-label">Exp</div>
                            <div class="holder-name">01/26</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cost-actions">
                <div class="btn-cost">
                    <small>Uang Arisan</small>
                    <div id="displayArisan">Rp 200.000</div>
                </div>
                <div class="btn-cost">
                    <small>Tabungan Wajib</small>
                    <div id="displayTabungan">Rp 25.000</div>
                </div>
            </div>
        </div>

        <div style="margin-top: 60px;">
            <div class="section-header">
                <div class="section-title">Data Anggota</div>
            </div>

            <div class="filter-bar">
                <select id="monthFilter" onchange="refreshData()">
                    <option value="jan">Januari</option><option value="feb">Februari</option>
                    <option value="mar">Maret</option><option value="apr">April</option>
                    <option value="mei">Mei</option><option value="jun">Juni</option>
                    <option value="jul">Juli</option><option value="agu">Agustus</option>
                    <option value="sep">September</option><option value="okt">Oktober</option>
                    <option value="nov">November</option><option value="des">Desember</option>
                </select>
                
                <select id="yearFilter" onchange="refreshData()">
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                    <option value="2030">2031</option>
                </select>

                <div class="search-wrapper">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Cari nama..." onkeyup="filterList()">
                </div>
            </div>

            <div id="loading" style="text-align:center; padding:40px; display:none;">
                <i class="fa-solid fa-circle-notch fa-spin" style="font-size:2rem; color:var(--primary);"></i>
            </div>
            
            <div id="participant-grid" class="grid-list">
                </div>
        </div>

    </div>

    <div id="locked-modal">
        <div class="modal-box">
            <i class="fa-solid fa-clock" style="font-size:3rem; color:#6B7280; margin-bottom:15px;"></i>
            <h3 style="color:#1F2937; margin:0 0 10px 0;">Belum Dimulai</h3>
            <p style="color:#6B7280; font-size:0.9rem; margin-bottom:20px;">
                Admin belum membuka sesi kocokan untuk publik. Mohon tunggu sejenak.
            </p>
            <button onclick="closeLockedModal()" style="background:#F3F4F6; border:none; padding:10px 20px; border-radius:12px; font-weight:600; cursor:pointer; color:#374151;">Oke, Saya Tunggu</button>
        </div>
    </div>

    <div id="toast" class="toast">
        <i class="fa-solid fa-circle-check"></i> Berhasil disalin!
    </div>

    <script>
        // CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyB8rMfcf-jSO8t8T145m6vnZQq-pFjtXjI",
            authDomain: "billy-d4379.firebaseapp.com",
            projectId: "billy-d4379",
            storageBucket: "billy-d4379.firebasestorage.app",
            messagingSenderId: "68495109677",
            appId: "1:68495109677:web:ad1d20544dcbd0b71a52a4",
            measurementId: "G-L8JMKLVPQ9",
            databaseURL: "https://billy-d4379-default-rtdb.asia-southeast1.firebasedatabase.app"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();

        const ADMIN_EMAIL = "ornaclealternatifa@gmail.com";
        
        let appStatus = { live: false, period: '' };

        // --- 1. MONITOR STATUS APP DARI FIREBASE ---
        db.ref('appStatus').on('value', snap => {
            appStatus = snap.val() || { live: false, period: '' };
        });

        // --- 2. FUNGSI CEK STATUS SAAT KLIK TOMBOL ---
        function handleEnterLive() {
            if (appStatus.live) {
                // Jika Live Aktif -> Masuk ke halaman dengan periode yang diset Admin
                window.location.href = `kocok-asli.html?period=${appStatus.period}`;
            } else {
                // Jika Belum Aktif -> Muncul Popup
                document.getElementById('locked-modal').style.display = 'flex';
            }
        }

        function closeLockedModal() {
            document.getElementById('locked-modal').style.display = 'none';
        }

        // AUTH
        function handleLogin() {
            auth.signInWithPopup(provider)
                .then((result) => {
                    const user = result.user;
                    if (user.email === ADMIN_EMAIL) {
                        window.location.href = "admin.html";
                    } else {
                        window.location.href = "member.html";
                    }
                })
                .catch((error) => {
                    console.error(error);
                    alert("Login Gagal: " + error.message);
                });
        }

        // COPY (FALLBACK)
        function copyToClipboard() {
            const text = "6050527156";
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(showToast);
            } else {
                let textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed"; textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus(); textArea.select();
                try {
                    document.execCommand('copy');
                    showToast();
                } catch (err) {}
                document.body.removeChild(textArea);
            }
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // DATA LOGIC
        function refreshData() {
            loadParticipants();
            loadSpotlightWinner();
        }

        function loadParticipants() {
            const month = document.getElementById('monthFilter').value;
            const year = document.getElementById('yearFilter').value;
            const periodKey = `${month}_${year}`; // matches admin key format
            
            const grid = document.getElementById('participant-grid');
            const loader = document.getElementById('loading');
            
            grid.innerHTML = "";
            loader.style.display = "block";

            db.ref('participants/' + periodKey).once('value', (snapshot) => {
                loader.style.display = "none";
                const data = snapshot.val();

                if (!data) {
                    grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:40px; color:#999;">
                        Tidak ada data anggota untuk <b>${month.toUpperCase()} ${year}</b>
                    </div>`;
                    window.currentData = [];
                    return;
                }

                const participants = Object.values(data);
                window.currentData = participants;
                renderList(participants);
            });
        }

        // --- SPOTLIGHT LOGIC (FIXED) ---
        function loadSpotlightWinner() {
            const month = document.getElementById('monthFilter').value;
            const year = document.getElementById('yearFilter').value;
            const periodKey = `arisan_${month}_${year}`; // e.g. arisan_jan_2026

            db.ref(periodKey + '/winners').limitToLast(1).on('value', (snapshot) => {
                const winView = document.getElementById('spot-content-winner');
                const emptyView = document.getElementById('spot-content-empty');
                
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    const key = Object.keys(data)[0];
                    const winner = data[key];

                    document.getElementById('spot-name').innerText = winner.name;
                    document.getElementById('spot-date').innerText = `${winner.day}, ${winner.timestamp}`;
                    
                    winView.style.display = 'block';
                    emptyView.style.display = 'none';
                } else {
                    winView.style.display = 'none';
                    emptyView.style.display = 'block';
                }
            });
        }

        function renderList(data) {
            const grid = document.getElementById('participant-grid');
            grid.innerHTML = "";

            data.forEach(p => {
                const isPaid = p.status === 'lunas';
                const initials = p.name.replace("Mba ", "").substring(0, 2).toUpperCase();
                const avatarClass = isPaid ? 'user-avatar paid' : 'user-avatar';
                const statusDot = isPaid ? 'paid' : '';
                const childInfo = p.child ? `<i class="fa-solid fa-seedling" style="font-size:0.7rem; color:var(--primary);"></i> ${p.child}` : 'Personal';

                const card = `
                <div class="user-card">
                    <div class="${avatarClass}">${initials}</div>
                    <div class="user-info">
                        <div class="user-name">${p.name}</div>
                        <div class="user-meta">
                            ${childInfo}
                            <div class="status-dot ${statusDot}"></div>
                            ${isPaid ? 'Lunas' : 'Belum'}
                        </div>
                    </div>
                    <div class="amount-tag">Rp ${p.nominal}</div>
                </div>`;
                grid.innerHTML += card;
            });
        }

        function filterList() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if(!window.currentData) return;
            const filtered = window.currentData.filter(p => 
                p.name.toLowerCase().includes(query) || 
                (p.child && p.child.toLowerCase().includes(query))
            );
            renderList(filtered);
        }

        // 3D CARD
        const card = document.getElementById('tiltCard');
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const rotateX = ((y - centerY) / centerY) * -10;
            const rotateY = ((x - centerX) / centerX) * 10;
            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
        });
        card.addEventListener('mouseleave', () => {
            card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
        });

        // INIT
        document.addEventListener("DOMContentLoaded", () => {
            refreshData(); 
        });
        
    </script>
</body>
</html>
